const t=t=>{var o=[];t.forEach(((t,e)=>{t.forEach(((t,n)=>{0===t&&o.push([e,n])}))}));var r=e(0,o.length-1);return t[o[r][0]][o[r][1]]=n(.5)?2:4,[o[r][0],o[r][1]]},e=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t);var n=function(t){return Math.random()<=parseFloat(t||.5)},o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];const r=document.getElementsByClassName("board")[0],a=document.getElementById("score"),l=document.getElementById("highscore");var i=0,s=!1,d=null,c=null;const u=t=>{i=0,s=!1,a.textContent=i,l.textContent=h("highscore"),document.getElementById("board-container").classList.add("play-screen"),document.getElementById("side-container").classList.add("play-screen"),document.onkeydown=null,document.removeEventListener("touchstart",E,!1),document.removeEventListener("touchmove",B,!1)},h=t=>{for(var e=document.cookie.split(";"),n=0;n<e.length;n++){var o=e[n].split("=");if(t===o[0].trim())return decodeURIComponent(o[1])}return"0"};window.onload=()=>{u()};const m=()=>{Swal.isVisible()||Swal.fire({icon:"error",title:"You Lose",html:"<h4>Sorry! Do you want to try again?</h4>",showCloseButton:!0,confirmButtonText:"Restart"}).then((t=>{t.isConfirmed&&(p(),u())}))},f=()=>{Swal.isVisible()||Swal.fire({icon:"success",title:"You Won!",html:"<h4>Close to continue, or restart for a new board.</h4>",showCloseButton:!0,confirmButtonText:"Restart"}).then((t=>{t.isConfirmed&&(p(),u())}))},g=()=>{r.innerHTML="",o.forEach(((t,e)=>{const n=document.createElement("div");n.className="row",t.forEach(((t,o)=>{const r=document.createElement("div");r.textContent=0!==t?t:"",r.id=e.toString()+o.toString(),r.className="tile t"+r.textContent,n.appendChild(r)})),r.appendChild(n)}))},y=(e,n,d)=>{v(r),(e=e||window.event).preventDefault();var c=parseInt(n||e.keyCode);d="number"!=typeof n?e.key.substr(5).toLowerCase():d;if(!(c<36||c>41)){r.style.animation=d+" 0.5s ease-in-out 0s 1 forwards";var u={};if(37==c||"left"===e.detail.dir?u=(t=>{var e=!1,n=!1,o=[],r=!1;do{for(var a=0;a<t.length;a++)for(e=!0;e;){e=!1;for(var l=1;l<t[a].length;l++)0===t[a][l-1]&&0!==t[a][l]&&(t[a][l-1]=t[a][l],t[a][l]=0,e=!0,r=!0)}if(n){n=!1;break}for(a=0;a<t.length;a++)for(l=0;l<t.length-1;l++)t[a][l+1]===t[a][l]&&0!==t[a][l]&&(t[a][l]=2*t[a][l],t[a][l+1]=0,o.push([a,l]),r=!0);n=!0}while(n);return{tiles:o,didShift:r}})(o):38==c||"up"===e.detail.dir?u=(t=>{var e=!1,n=!1,o=[],r=!1;do{for(var a=0;a<t.length;a++)for(e=!0;e;){e=!1;for(var l=0;l<t.length-1;l++)0===t[l][a]&&0!==t[l+1][a]&&(t[l][a]=t[l+1][a],t[l+1][a]=0,e=!0,r=!0)}if(n){n=!1;break}for(a=0;a<t.length;a++)for(l=0;l<t.length-1;l++)t[l+1][a]===t[l][a]&&0!==t[l][a]&&(t[l+1][a]=2*t[l][a],t[l][a]=0,o.push([l,a]),r=!0);n=!0}while(n);return{tiles:o,didShift:r}})(o):39==c||"right"===e.detail.dir?u=(t=>{var e=!1,n=[],o=!1,r=!1;do{for(var a=0;a<t.length;a++)for(e=!0;e;){e=!1;for(var l=t[a].length-2;l>-1;l--)0===t[a][l+1]&&0!==t[a][l]&&(t[a][l+1]=t[a][l],t[a][l]=0,e=!0,r=!0)}if(o){o=!1;break}for(a=0;a<t.length;a++)for(l=t.length-1;l>-1&&l-1!=-1;l--)t[a][l-1]===t[a][l]&&0!==t[a][l]&&(t[a][l]=2*t[a][l],t[a][l-1]=0,n.push([a,l]),r=!0);o=!0}while(o);return{tiles:n,didShift:r}})(o):40!=c&&"down"!==e.detail.dir||(u=(t=>{var e=!1,n=!1,o=[],r=!1;do{for(var a=0;a<t.length;a++)for(e=!0;e;){e=!1;for(var l=t.length-1;l>0;l--)0===t[l][a]&&0!==t[l-1][a]&&(t[l][a]=t[l-1][a],t[l-1][a]=0,e=!0,r=!0)}if(n){n=!1;break}for(a=0;a<t.length;a++)for(l=t.length-1;l>0;l--)t[l-1][a]===t[l][a]&&0!==t[l][a]&&(t[l-1][a]=2*t[l][a],t[l][a]=0,o.push([l,a]),r=!0);n=!0}while(n);return{tiles:o,didShift:r}})(o)),u.didShift){const e=t(o);g();const n=document.getElementById(e[0].toString()+e[1].toString());v(n),n.style.animation="new 0.3s ease-in-out 0s 1 forwards"}u.tiles.length>0&&u.tiles.forEach((t=>{if(0!==o[t[0]][t[1]]){const e=document.getElementById(t[0].toString()+t[1].toString());i+=isNaN(parseInt(e.textContent))?0:parseInt(e.textContent),a.textContent=i,i>parseInt(l.textContent)&&(l.textContent=i,p(),v(l),l.style.animation="addScore 0.5s ease-in-out 0s 1 forwards"),v(a),a.style.animation="addScore 0.5s ease-in-out 0s 1 forwards",v(e),e.style.animation="match 0.5s ease-in-out 0s 1 forwards"}})),(t=>{for(var e=!1,n=0,o=0;!e&&o<t.length;o++)for(var r=0;!e&&r<t[o].length&&!(e=0===(n=t[o][r]));r++)o-1!=-1&&(e=e||t[o-1][r]===n),o+1!==t.length&&(e=e||t[o+1][r]===n),r-1!=-1&&(e=e||t[o][r-1]===n),r+1!==t[o].length&&(e=e||t[o][r+1]===n);return e})(o)||Swal.isVisible()||(setTimeout(m,500),s=!1),u.tiles.length>0&&!s&&u.tiles.forEach((t=>{2048!=o[t[0]][t[1]]||Swal.isVisible()||(setTimeout(f,500),s=!0)}))}},v=t=>{t.style.animation="none",t.offsetHeight,t.style.animation=null},p=()=>{document.cookie="highscore="+l.textContent+"; max-age=3600; path=/"};document.getElementById("collapseBtn").onclick=()=>{document.getElementById("side-container").classList.toggle("collapse")},document.getElementById("play-btn").onclick=()=>{const t=parseInt(document.getElementById("layoutTxt").value);if(t>100||t<=0||isNaN(t))Swal.fire({icon:"error",title:"That layout value is invaild!",html:"<h4>Please use a different layout value.</h4>",showCloseButton:!0,confirmButtonText:"Ok"});else{for(var e=[],n=0;n<t;n++){e.push([]);for(var o=0;o<t;o++)e[n].push(0)}var a=100-2.5*t;r.style.zoom=a>6?`${a}%`:"6%",w(e)}};const w=e=>{o=e,document.getElementById("board-container").classList.remove("play-screen"),document.getElementById("side-container").classList.remove("play-screen"),document.onkeydown=y,document.addEventListener("touchstart",E,!1),document.addEventListener("touchmove",B,!1),t(o),g()};function E(t){const e=function(t){return t.touches}(t)[0];d=e.clientX,c=e.clientY}function B(t){if(d&&c){var e=t.touches[0].clientX,n=t.touches[0].clientY,o=d-e,r=c-n;Math.abs(o)>Math.abs(r)?o>0?y(null,37,"left"):y(null,39,"right"):r>0?y(null,38,"up"):y(null,40,"down"),d=null,c=null}}document.getElementById("end-btn").onclick=()=>{p(),u()},document.getElementById("layoutTxt").onchange=()=>{document.getElementById("by-layout").textContent="by "+document.getElementById("layoutTxt").value};
//# sourceMappingURL=index.d905149b.js.map
